<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Botar o Shape Project</title>
    <style>
        /* CSS (Styling) */
        :root {
            --primary-color: #007BFF;
            --secondary-color: #F8F9FA;
            --text-color: #333;
            --light-text-color: #777;
            --border-color: #E9ECEF;
            --accent-color: #28A745;
            --rest-color: #FFC107;
            --background-color: #FFFFFF;
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
        }

        body {
            font-family: var(--font-family);
            margin: 0;
            background-color: var(--secondary-color);
            color: var(--text-color);
            overscroll-behavior: none;
        }

        .app-container {
            max-width: 600px;
            margin: 0 auto;
            background-color: var(--background-color);
            min-height: 100vh;
            box-shadow: 0 0 15px rgba(0,0,0,0.05);
        }

        .app-header {
            background-color: var(--primary-color);
            color: var(--background-color);
            padding: 1rem 1.5rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .app-header h1 {
            margin: 0;
            font-size: 1.5rem;
        }

        main {
            padding: 1rem;
        }

        section {
            display: none; /* Hide all sections by default */
        }

        section.active {
            display: block; /* Show active section */
        }
        
        .day-card {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .day-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.08);
        }
        
        .day-card.today {
            border-left: 5px solid var(--primary-color);
            font-weight: bold;
        }

        .day-info h3 {
            margin: 0 0 0.25rem 0;
            font-size: 1.1rem;
        }

        .day-info p {
            margin: 0;
            font-size: 0.9rem;
            color: var(--light-text-color);
        }
        
        .arrow {
            font-size: 1.5rem;
            color: var(--border-color);
        }

        .session-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .back-button {
            background: none;
            border: none;
            font-size: 1.75rem;
            cursor: pointer;
            color: var(--primary-color);
            margin-right: 1rem;
            padding: 0 0.5rem;
        }
        
        .session-title h2 {
            margin: 0;
            font-size: 1.5rem;
        }
        .session-title p {
            margin: 0;
            color: var(--light-text-color);
        }

        .session-details p, .session-notes p {
            background-color: var(--secondary-color);
            padding: 1rem;
            border-radius: 8px;
            line-height: 1.5;
        }

        .superset-card, .circuit-card {
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-bottom: 1.5rem;
            padding: 1.25rem;
        }

        .superset-header h4 {
            margin: 0 0 1rem 0;
            font-size: 1.2rem;
            color: var(--primary-color);
        }
        
        .superset-header-info {
           display: flex;
           justify-content: space-between;
           color: var(--light-text-color);
           font-size: 0.9rem;
           margin-bottom: 1rem;
           padding-bottom: 0.75rem;
           border-bottom: 1px solid var(--border-color);
        }
        
        .exercise {
            margin-bottom: 1rem;
        }
        
        .exercise:last-child {
            margin-bottom: 0;
        }
        
        .exercise-name {
            font-weight: bold;
            margin: 0 0 0.25rem 0;
        }
        
        .exercise-reps {
            color: var(--light-text-color);
            margin: 0 0 0.5rem 0;
        }

        .exercise-description {
            font-size: 0.85rem;
            color: var(--light-text-color);
            margin: 0;
            font-style: italic;
        }
        
        .start-workout-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            width: 100%;
            padding: 1rem;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 1rem;
            transition: background-color 0.2s;
        }
        
        .start-workout-btn:hover {
            background-color: #218838;
        }
        
        .workout-view {
            text-align: center;
        }
        
        .workout-progress {
            font-size: 1rem;
            color: var(--light-text-color);
            margin-bottom: 1rem;
        }
        
        .workout-exercise-name {
            font-size: 2rem;
            font-weight: bold;
            margin: 0 0 0.5rem 0;
        }

        .show-media-btn {
            background: none;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 0.5rem;
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }
        
        .timer-visual-container {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 1rem auto;
        }

        .countdown-svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .countdown-bg, .countdown-progress {
            fill: none;
            stroke-width: 10;
        }

        .countdown-bg {
            stroke: var(--border-color);
        }

        .countdown-progress {
            stroke: var(--rest-color);
            stroke-linecap: round;
            transition: stroke-dashoffset 1s linear;
        }

        .timer-display {
            font-size: 6rem;
            font-weight: bold;
            margin: 1rem auto;
            color: var(--primary-color);
        }
        
        .timer-display.in-visual {
            position: absolute;
            top: 39%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            font-weight: bold;
            color: var(--text-color);
        }

        .timer-display.resting {
            color: var(--rest-color);
        }

        .workout-reps {
            font-size: 2.5rem;
            margin-bottom: 2rem;
        }
        
        .workout-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 2rem;
            gap: 1rem;
        }

        .workout-btn {
            padding: 1rem 2rem;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            border: 1px solid var(--primary-color);
            background-color: var(--background-color);
            color: var(--primary-color);
            min-width: 100px;
        }
        
        .main-action-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 1.25rem 2.5rem;
            font-size: 1.2rem;
            transform: scale(1.1);
        }
        
        .finish-workout-btn {
             background-color: #6c757d;
             color: white;
             border: none;
             width: 100%;
             padding: 1rem;
             font-size: 1.1rem;
             border-radius: 8px;
             cursor: pointer;
             margin-top: 2rem;
        }

        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            position: relative;
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
        }
        
        .modal-content img {
            width: 100%;
            height: auto;
            border-radius: 4px;
        }

        .modal-close-btn {
            position: absolute;
            top: -10px;
            right: -10px;
            color: white;
            background-color: var(--primary-color);
            font-size: 28px;
            font-weight: bold;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            border: 2px solid white;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            line-height: 1;
        }
    </style>
</head>
<body>

    <div class="app-container">
        <header class="app-header">
            <h1>Botar o Shape Project</h1>
        </header>

        <main>
            <section id="weekly-view" class="active"></section>
            <section id="session-view"></section>
            <section id="workout-view"></section>
        </main>
        
        <!-- Media Modal Structure -->
        <div id="media-modal" class="modal-overlay">
            <div class="modal-content">
                <button id="modal-close-btn" class="modal-close-btn">&times;</button>
                <img id="modal-image" src="" alt="Exercise Example"
                     onerror="this.onerror=null;this.src='https://placehold.co/400x400/eee/ccc?text=Image+Not+Found';">
            </div>
        </div>
    </div>

    <script>
        // --- DATA ---
        const trainingData = {
            "program": [
                { "day": "Monday", "session": "EMS", "type": "EMS", "time_minutes": 20, "notes": "Sessão de eletroestimulação guiada em estúdio.", "exercises": [] },
                { "day": "Tuesday", "session": "Treino A – Push & Core", "type": "Strength Supersets", "time_minutes": 45, "supersets": [
                    { "name": "Superset A", "sets": 3, "rest_seconds": 60, "exercises": [ { "name": "Dumbbell Bench Press", "reps": "8-12", "description": "Supino com halteres focado em peito e ombros.", "media": "https://placehold.co/400x400.gif?text=Bench+Press+GIF" }, { "name": "Plank Shoulder Tap", "reps": 12, "description": "Prancha alta tocando os ombros; core anti-rotação.", "media": "https://placehold.co/400x400.gif?text=Plank+Tap+GIF" } ] },
                    { "name": "Superset B", "sets": 3, "rest_seconds": 60, "exercises": [ { "name": "Overhead Press", "reps": "8-12", "description": "Desenvolvimento militar em pé.", "media": "https://placehold.co/400x400.gif?text=OHP+GIF" }, { "name": "Hollow Hold", "reps": "30s", "description": "Isometria em hollow para core.", "media": "https://placehold.co/400x400.gif?text=Hollow+Hold+GIF" } ] },
                    { "name": "Superset C", "sets": 3, "rest_seconds": 60, "exercises": [ { "name": "Parallel Bar Dips (or Bench Dips)", "reps": "8-12", "description": "Tríceps e peito.", "media": "https://placehold.co/400x400.gif?text=Dips+GIF" }, { "name": "Ab Wheel Rollout", "reps": "8-10", "description": "Rolamento de roda para core.", "media": "https://placehold.co/400x400.gif?text=Ab+Wheel+GIF" } ] }
                ]},
                { "day": "Wednesday", "session": "Treino B – Lower & Pull", "type": "Strength Supersets", "time_minutes": 45, "supersets": [
                    { "name": "Superset A", "sets": 3, "rest_seconds": 60, "exercises": [ { "name": "Barbell Back Squat", "reps": "8-10", "description": "Agachamento livre.", "media": "https://placehold.co/400x400.gif?text=Squat+GIF" }, { "name": "Face Pull (Band/Cable)", "reps": 15, "description": "Estabilidade escapular.", "media": "https://placehold.co/400x400.gif?text=Face+Pull+GIF" } ] },
                    { "name": "Superset B", "sets": 3, "rest_seconds": 60, "exercises": [ { "name": "Romanian Deadlift", "reps": "8-10", "description": "Posterior de coxa e glúteos.", "media": "https://placehold.co/400x400.gif?text=RDL+GIF" }, { "name": "Bird-Dog", "reps": "12/lado", "description": "Core anti-rotação.", "media": "https://placehold.co/400x400.gif?text=Bird-Dog+GIF" } ] },
                    { "name": "Superset C", "sets": 3, "rest_seconds": 60, "exercises": [ { "name": "Bent-Over Row", "reps": "8-12", "description": "Dorsais e bíceps.", "media": "https://placehold.co/400x400.gif?text=Row+GIF" }, { "name": "Standing Calf Raise", "reps": 15, "description": "Panturrilhas.", "media": "https://placehold.co/400x400.gif?text=Calf+Raise+GIF" } ] }
                ]},
                { "day": "Thursday", "session": "EMS", "type": "EMS", "time_minutes": 20, "notes": "Sessão de eletroestimulação guiada.", "exercises": [] },
                { "day": "Friday", "session": "Active Recovery", "type": "Recovery", "time_minutes": 30, "notes": "Alongamentos, liberação miofascial ou caminhada leve.", "exercises": [] },
                { "day": "Saturday", "session": "Treino C – Full-Body Metabólico", "type": "EMOM Circuit", "time_minutes": 35, "circuit": { "format": "EMOM", "rounds": 5, "work_seconds": 45, "rest_seconds": 15, "exercises": [ {"name": "Kettlebell Swing", "reps": 15}, {"name": "Push-Up", "reps": 12}, {"name": "Goblet Squat", "reps": 15}, {"name": "TRX Row", "reps": 12}, {"name": "Jump Rope", "duration": "40s"}, {"name": "Rest / Adjust load", "duration": "15s"} ] } },
                { "day": "Sunday", "session": "Rest", "type": "Rest", "notes": "Recuperação total.", "exercises": [] }
            ]
        };

        // --- APP STATE ---
        const state = {
            currentView: 'weekly-view',
            selectedDay: null,
            workout: {
                active: false,
                isResting: false,
                supersetIndex: 0,
                exerciseIndex: 0,
                set: 1,
            },
            timer: {
                interval: null,
            }
        };

        // --- DOM ELEMENT CACHE ---
        const views = {
            weekly: document.getElementById('weekly-view'),
            session: document.getElementById('session-view'),
            workout: document.getElementById('workout-view')
        };
        const modal = {
            overlay: document.getElementById('media-modal'),
            image: document.getElementById('modal-image'),
            closeBtn: document.getElementById('modal-close-btn')
        };
        
        // --- RENDER FUNCTIONS ---
        function renderWeeklyView() {
            const today = new Date().toLocaleString('en-US', { weekday: 'long' });
            let html = '';
            trainingData.program.forEach(day => {
                const isToday = day.day === today;
                html += `
                    <div class="day-card ${isToday ? 'today' : ''}" data-day="${day.day}">
                        <div class="day-info">
                            <h3>${day.day}</h3>
                            <p>${day.session}</p>
                        </div>
                        <span class="arrow">&rsaquo;</span>
                    </div>`;
            });
            views.weekly.innerHTML = html;

            document.querySelectorAll('.day-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    const dayName = e.currentTarget.dataset.day;
                    const dayData = trainingData.program.find(d => d.day === dayName);
                    if (dayData) {
                        state.selectedDay = dayData;
                        navigateTo('session-view');
                    }
                });
            });
        }

        function renderSessionView() {
            const day = state.selectedDay;
            let html = `
                <div class="session-header">
                    <button class="back-button" id="back-to-week-btn">&lsaquo;</button>
                    <div class="session-title"><h2>${day.day}</h2><p>${day.session}</p></div>
                </div>`;
            
            if (day.type === "Strength Supersets" && day.supersets?.length) {
                day.supersets.forEach(superset => {
                    html += `
                        <div class="superset-card">
                            <div class="superset-header">
                                <h4>${superset.name}</h4>
                                <div class="superset-header-info">
                                    <span>${superset.sets} SETS</span>
                                    <span>${superset.rest_seconds}s REST</span>
                                </div>
                            </div>
                            ${(superset.exercises || []).map(ex => `
                                <div class="exercise">
                                    <p class="exercise-name">${ex.name}</p>
                                    <p class="exercise-reps">Reps: ${ex.reps}</p>
                                    <p class="exercise-description">${ex.description}</p>
                                </div>`).join('')}
                        </div>`;
                });
                html += `<button class="start-workout-btn" id="start-workout-btn">Start Workout</button>`;
            } else {
                 html += `<div class="session-notes"><p>No workout details available.</p></div>`;
            }
            views.session.innerHTML = html;
            
            document.getElementById('back-to-week-btn').addEventListener('click', () => navigateTo('weekly-view'));
            const startBtn = document.getElementById('start-workout-btn');
            if (startBtn) {
                startBtn.addEventListener('click', startWorkout);
            }
        }

        function renderWorkoutView() {
            clearInterval(state.timer.interval);
            const day = state.selectedDay;

            if (state.workout.isResting) {
                const superset = day.supersets?.[state.workout.supersetIndex];
                if (superset) {
                    renderRestScreen(superset.rest_seconds);
                } else {
                    endWorkout();
                }
                return;
            }

            const superset = day.supersets?.[state.workout.supersetIndex];
            const exercise = superset?.exercises?.[state.workout.exerciseIndex];
            
            if (!exercise) {
                endWorkout();
                return;
            }

            const progressText = `Set ${state.workout.set}/${superset.sets} | Superset ${state.workout.supersetIndex + 1}/${day.supersets.length}`;
            const isTimed = typeof exercise.reps === 'string' && exercise.reps.endsWith('s');
            
            let html = `
                <div class="workout-view">
                    <div class="session-header">
                        <button class="back-button" id="back-to-session-btn">&lsaquo;</button>
                        <div class="session-title"><h2>${day.session}</h2></div>
                    </div>
                    <p class="workout-progress">${progressText}</p>
                    <h3 class="workout-exercise-name">${exercise.name}</h3>
                    ${exercise.media ? `<button class="show-media-btn" id="show-media-btn">Show Example</button>` : ''}
                `;

            if (isTimed) {
                const duration = parseInt(exercise.reps);
                html += `<div class="timer-display">${duration}</div>
                    <div class="workout-controls">
                        <button class="workout-btn main-action-btn" id="timed-action-btn">Start</button>
                    </div>`;
            } else {
                html += `<div class="workout-reps">${exercise.reps}</div>
                    <div class="workout-controls">
                        <button class="workout-btn" id="prev-exercise-btn">Prev</button>
                        <button class="workout-btn main-action-btn" id="next-exercise-btn">Done</button>
                    </div>`;
            }
            html += `<button class="finish-workout-btn" id="end-workout-btn">End Workout</button></div>`;
            views.workout.innerHTML = html;

            document.getElementById('back-to-session-btn').addEventListener('click', endWorkout);
            document.getElementById('end-workout-btn').addEventListener('click', endWorkout);
            
            const showMediaBtn = document.getElementById('show-media-btn');
            if(showMediaBtn) showMediaBtn.addEventListener('click', () => openMediaModal(exercise.media));

            const prevBtn = document.getElementById('prev-exercise-btn');
            if (prevBtn) prevBtn.addEventListener('click', prevExercise);

            const nextBtn = document.getElementById('next-exercise-btn');
            if (nextBtn) nextBtn.addEventListener('click', nextExercise);

            const timedBtn = document.getElementById('timed-action-btn');
            if (timedBtn) {
                 const duration = parseInt(exercise.reps);
                 timedBtn.addEventListener('click', () => startExerciseTimer(duration));
            }
        }

        function renderRestScreen(duration) {
            let html = `
                <div class="workout-view">
                    <p class="workout-progress">Next set coming up...</p>
                    <h3 class="workout-exercise-name">REST</h3>
                    <div class="timer-visual-container">
                        <svg class="countdown-svg">
                            <circle class="countdown-bg" cx="100" cy="100" r="90"></circle>
                            <circle class="countdown-progress" id="countdown-progress-circle" cx="100" cy="100" r="90"></circle>
                        </svg>
                        <div class="timer-display in-visual resting" id="rest-timer-display">${duration}</div>
                    </div>
                    <div class="workout-controls">
                        <button class="workout-btn main-action-btn" id="skip-rest-btn">Skip Rest</button>
                    </div>
                    <button class="finish-workout-btn" id="end-workout-btn-rest">End Workout</button>
                </div>`;
            views.workout.innerHTML = html;

            document.getElementById('skip-rest-btn').addEventListener('click', skipRest);
            document.getElementById('end-workout-btn-rest').addEventListener('click', endWorkout);
            startRestTimer(duration);
        }
        
        function renderCompletionScreen() {
             let html = `
                <div class="workout-view">
                    <h3 class="workout-exercise-name">Workout Complete!</h3>
                    <p class="workout-progress">Great job!</p>
                     <div class="workout-controls">
                        <button class="workout-btn main-action-btn" id="back-to-home-btn">Done</button>
                    </div>
                </div>`;
            views.workout.innerHTML = html;
            document.getElementById('back-to-home-btn').addEventListener('click', () => navigateTo('weekly-view'));
        }

        // --- NAVIGATION ---
        function navigateTo(viewId) {
            state.currentView = viewId;
            clearInterval(state.timer.interval);
            
            for (const key in views) {
                views[key].classList.toggle('active', key === viewId.replace('-view', ''));
            }

            switch(viewId) {
                case 'weekly-view': renderWeeklyView(); break;
                case 'session-view': renderSessionView(); break;
                case 'workout-view': renderWorkoutView(); break;
            }
            window.scrollTo(0, 0);
        }

        // --- TIMER LOGIC ---
        function startExerciseTimer(duration) {
            clearInterval(state.timer.interval);
            let timeLeft = duration;
            const timerDisplay = views.workout.querySelector('.timer-display');
            const actionButton = views.workout.querySelector('#timed-action-btn');
            actionButton.textContent = 'Skip';
            actionButton.onclick = nextExercise;

            state.timer.interval = setInterval(() => {
                timeLeft--;
                if(timerDisplay) timerDisplay.textContent = timeLeft;
                if (timeLeft <= 0) {
                    nextExercise();
                }
            }, 1000);
        }

        function startRestTimer(duration) {
            clearInterval(state.timer.interval);

            const progressCircle = document.getElementById('countdown-progress-circle');
            const timerDisplay = document.getElementById('rest-timer-display');
            if (!progressCircle || !timerDisplay) return;

            const radius = progressCircle.r.baseVal.value;
            const circumference = 2 * Math.PI * radius;
            let timeLeft = duration;

            progressCircle.style.strokeDasharray = circumference;
            progressCircle.style.strokeDashoffset = 0;
            
            // Trigger the animation on the next frame
            requestAnimationFrame(() => {
                progressCircle.style.transition = `stroke-dashoffset ${duration}s linear`;
                progressCircle.style.strokeDashoffset = circumference;
            });
            
            state.timer.interval = setInterval(() => {
                timeLeft--;
                if(timerDisplay) timerDisplay.textContent = timeLeft;
                if (timeLeft <= 0) {
                    skipRest();
                }
            }, 1000);
        }

        // --- WORKOUT LOGIC ---
        function startWorkout() {
            Object.assign(state.workout, { active: true, isResting: false, supersetIndex: 0, exerciseIndex: 0, set: 1 });
            navigateTo('workout-view');
        }

        function endWorkout() {
            navigateTo('session-view');
        }

        function skipRest() {
            clearInterval(state.timer.interval);
            state.workout.isResting = false;
            renderWorkoutView();
        }

        function nextExercise() {
            clearInterval(state.timer.interval);
            const day = state.selectedDay;
            if (!day || day.type !== 'Strength Supersets') return;
            
            const superset = day.supersets[state.workout.supersetIndex];
            const isLastExerciseInSet = state.workout.exerciseIndex >= superset.exercises.length - 1;

            if (isLastExerciseInSet) {
                state.workout.exerciseIndex = 0;
                state.workout.set++;
                
                if (state.workout.set > superset.sets) {
                    state.workout.set = 1;
                    state.workout.supersetIndex++;
                    
                    if (state.workout.supersetIndex >= day.supersets.length) {
                        renderCompletionScreen();
                        return;
                    }
                }
                state.workout.isResting = true;
            } else {
                state.workout.exerciseIndex++;
            }
            renderWorkoutView();
        }

        function prevExercise() {
            clearInterval(state.timer.interval);
            state.workout.isResting = false;
            const day = state.selectedDay;
            if (!day) return;

            state.workout.exerciseIndex--;
            if (state.workout.exerciseIndex < 0) {
                const currentSupersetIndex = state.workout.supersetIndex;
                const currentSet = state.workout.set;

                if (currentSet > 1) {
                    state.workout.set--;
                } else if (currentSupersetIndex > 0) {
                    state.workout.supersetIndex--;
                    const prevSuperset = day.supersets[state.workout.supersetIndex];
                    state.workout.set = prevSuperset.sets;
                }
                const prevSuperset = day.supersets[state.workout.supersetIndex];
                state.workout.exerciseIndex = prevSuperset.exercises.length - 1;
            }
            renderWorkoutView();
        }

        // --- MODAL LOGIC ---
        function openMediaModal(url) {
            modal.image.src = url;
            modal.overlay.style.display = 'flex';
        }
        
        function closeMediaModal() {
            modal.overlay.style.display = 'none';
            modal.image.src = ''; // Stop gif from loading in the background
        }

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            navigateTo('weekly-view');
            modal.closeBtn.addEventListener('click', closeMediaModal);
            modal.overlay.addEventListener('click', (e) => {
                if (e.target === modal.overlay) {
                    closeMediaModal();
                }
            });
        });
    </script>
</body>
</html>
